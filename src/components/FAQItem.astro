---
// src/components/FAQItem.astro (Versión Cálida - Dra. Cassella)
interface Props {
  title: string;
  answer: string;
}

const { title, answer } = Astro.props;
const id = 'faq-' + Math.random().toString(36).substr(2, 9);
---

<div class="faq-container border-b border-slate-200 last:border-0">
  
  <button 
    id={`btn-${id}`}
    class="w-full py-6 flex justify-between items-center text-left group focus:outline-none"
    aria-expanded="false"
    aria-controls={`content-${id}`}
  >
    <span class="text-lg font-bold text-slate-800 group-hover:text-accent transition-colors pr-8 font-serif">
      {title}
    </span>
    
    <span id={`icon-${id}`} class="shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 transition-all duration-300 group-hover:bg-orange-50 group-hover:text-accent">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
    </span>
  </button>

  <div 
    id={`content-${id}`}
    class="overflow-hidden max-h-0 transition-all duration-500 ease-in-out"
  >
    <div class="pb-6 text-slate-600 text-sm leading-relaxed border-l-2 border-accent pl-4 ml-1">
      {answer}
    </div>
  </div>

</div>

<script define:vars={{ id }}>
  const btn = document.getElementById(`btn-${id}`);
  const content = document.getElementById(`content-${id}`);
  const icon = document.getElementById(`icon-${id}`);

  if (btn && content && icon) {
    btn.addEventListener('click', () => {
      const isOpen = content.style.maxHeight;

      if (isOpen) {
        // CERRAR
        content.style.maxHeight = null;
        icon.style.transform = 'rotate(0deg)';
        icon.classList.remove('bg-accent', 'text-white', 'rotate-45');
        icon.classList.add('bg-slate-100', 'text-slate-500');
      } else {
        // ABRIR
        content.style.maxHeight = content.scrollHeight + "px";
        icon.style.transform = 'rotate(45deg)';
        icon.classList.remove('bg-slate-100', 'text-slate-500');
        icon.classList.add('bg-accent', 'text-white'); // Se pone naranja sólido
      }
    });
  }
</script>